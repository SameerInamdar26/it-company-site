<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechNova - Task</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1f1c2c 0%, #928dab 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 20px;
    }
    .task-view {
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      max-width: 800px;
      width: 100%;
      animation: fadeIn 0.8s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }
    .task-header h2 {
      font-size: 26px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }
    .back-btn {
      padding: 10px 20px;
      background: #95a5a6;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .task-content {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.1);
    }
    .task-content h3 { color: #667eea; margin-bottom: 10px; }
    .task-content p { color: #555; line-height: 1.6; }
    .upload-section {
      border: 2px dashed #667eea;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
      background: #f8f9fa;
    }
    .upload-section input[type="file"] { display: none; }
    .upload-label {
      display: inline-block;
      padding: 12px 30px;
      background: #667eea;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .upload-label:hover { background: #764ba2; }
    .file-name { margin-top: 10px; color: #666; font-size: 14px; }
    .submit-btn {
      width: 100%; padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; border: none; border-radius: 8px;
      font-size: 16px; font-weight: 600; cursor: pointer;
    }
    .submit-btn:disabled { background: #ccc; cursor: not-allowed; }
    .success-message {
      display: none;
      background: #27ae60;
      color: white;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      margin-top: 15px;
      font-weight: 600;
    }
    .info-note {
      background: rgba(102,126,234,0.2);
      backdrop-filter: blur(10px);
      color: #333;
      padding: 20px;
      border-radius: 15px;
      margin: 25px 0;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .info-note h3 { margin-bottom: 10px; font-size: 20px; font-weight: 700; color: #667eea; }
    .inform-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #ff9800, #f57c00);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 15px;
    }
    .inform-btn:hover { transform: scale(1.05); }
    .inform-box {
      display: none;
      margin-top: 20px;
    }
    .inform-box textarea {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 2px solid #667eea;
      margin-bottom: 12px;
      font-size: 14px;
      resize: none;
    }
    .submit-inform {
      padding: 12px 24px;
      background: #43cea2;
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
    .inform-success {
      display: none;
      background: #27ae60;
      color: white;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="task-view">
    <div class="task-header">
      <h2 id="taskTitle">Today's Task</h2>
      <button class="back-btn" onclick="backToDashboard()">‚Üê Back</button>
    </div>
    <div class="task-content">
      <h3 id="taskHeading">Task Title</h3>
      <p id="taskDescription"></p>
    </div>
    <div class="upload-section">
      <input type="file" id="fileInput" multiple accept=".html,.css,.js,.py,.java,.cpp,.txt,.zip">
      <label for="fileInput" class="upload-label">üìÅ Choose Files</label>
      <div class="file-name" id="fileName">No files selected</div>
    </div>
    <button class="submit-btn" id="submitBtn" onclick="submitTask()">Submit Task</button>
    <div class="success-message" id="successMessage">‚úÖ Task submitted successfully!</div>

    <!-- Info Note + Inform Us -->
    <div class="info-note">
      <h3>üí° Internship Task Cycle</h3>
      <p>Every <strong>4 days at 9:00 AM</strong> (your local time), you'll receive an exciting new professional task to explore. You‚Äôll have until <strong>11:00 AM on the fourth day</strong> to submit your work through the portal. This rhythm mirrors real-world project timelines and helps you build strong time-management skills.</p>
    <p style="background-color:#f0f8ff; padding:10px; border-left:4px solid #4CAF50;"><strong>üåü Life happens!</strong> If something unexpected comes up and you‚Äôre unable to complete the task‚Äî<em>don‚Äôt stress, it‚Äôs totally normal</em> üòä. Just inform your supervisor using the form below, and we‚Äôll help you get back on track. Your growth is our priority!</p>
    </div>
    <button class="inform-btn" onclick="showInformBox()">üì¢ Inform Us</button>
    <div id="informBox" class="inform-box">
      <textarea id="informText" rows="4" placeholder="Hi my name is [Your Name] and my username is [Your Username]. I am not able to complete this task."></textarea>
      <button class="submit-inform" onclick="submitInform()">‚úÖ Submit</button>
    </div>
    <div id="informSuccess" class="inform-success">‚úÖ Thank you for informing. Try the next task‚Ä¶ keep learning!</div>
  </div>

  <script>
    const currentUser = localStorage.getItem('currentUser');
    if (!currentUser) {
      window.location.href = "login.html";
    }

    // Example tasks (every 4 days + mediator tasks) - Updated with more detailed, professional descriptions
    const tasks = {
      1: { 
        title: "Internship Task: Landing Page Project", 
        description: "Objective: As part of your internship, create a professional landing page for a fictional client's portfolio website. This task builds on foundational HTML skills while introducing advanced concepts like responsiveness and user experience.\n\nRequirements:\n- Structure: Use semantic HTML5 elements (<header>, <nav>, <main>, <footer>) with at least 3 sections: introduction, skills showcase, and contact form.\n- Content: Add headings, paragraphs, unordered list of skills, ordered list for project timelines, and at least 5 links.\n- Interactivity: Basic CSS styling and a simple JS feature (collapsible menu or form validation).\n- Responsiveness: Adapt to mobile, tablet, and desktop using media queries.\n- Best Practices: Accessibility (alt text, keyboard navigation). Include comments explaining key decisions.\n\nSubmission: Upload HTML, CSS, and JS files."
      },
      4: { title: "Internship Task: CSS Styling", description: "Style your landing page with a professional theme: consistent colors, fonts, spacing, and hover effects." },
      8: { title: "Internship Task: Mini Portfolio", description: "Create a small portfolio page with your name, photo, and 2 project links." },
      12: { title: "Internship Task: JavaScript Fundamentals", description: "Write scripts with variables, operators, loops, and functions to add interactivity." },
      16: { title: "Internship Task: Interactive Form", description: "Build a form with validation (name, email, password) using JavaScript." },
      20: { title: "Internship Task: React Basics", description: "Setup a React app and create functional components with props." },
      24: { title: "Internship Task: To‚ÄëDo App", description: "Build a simple To‚ÄëDo list app in React with add/remove functionality." },
      28: { title: "Internship Task: Node.js & Express", description: "Create a REST API with Express and basic routes." },
      32: { title: "Internship Task: API Integration", description: "Connect your React frontend to your Express backend API." },
      36: { title: "Internship Task: MongoDB & Mongoose", description: "Setup MongoDB, define schemas, and perform CRUD operations." },
      40: { title: "Internship Task: Blog System", description: "Build a mini blog app with posts stored in MongoDB." },
      44: { title: "Internship Task: Authentication", description: "Implement login/signup with JWT and password hashing." },
      48: { title: "Internship Task: Protected Routes", description: "Restrict access to certain pages in your React app using authentication." },
      52: { title: "Internship Task: Deployment", description: "Deploy your full stack app to Netlify/Vercel (frontend) and Heroku/Render (backend)." },
      56: { title: "Internship Task: Testing", description: "Write unit tests for your API endpoints using Jest or Mocha." },
      60: { title: "Final Internship Task: Project Presentation", description: "Prepare and present your full stack project with documentation. This is a standalone final assignment, not connected to the next task." }
    };

    const day = localStorage.getItem('currentTaskDay');
    if (!day || !tasks[day]) {
      document.getElementById('taskHeading').textContent = "No Task Available";
      document.getElementById('taskDescription').textContent = "Please check back later when a new task unlocks.";
    } else {
      const task = tasks[day];
      document.getElementById('taskTitle').textContent = "Today's Task";
      document.getElementById('taskHeading').textContent = task.title;
      document.getElementById('taskDescription').textContent = task.description;
    }

    document.getElementById('fileInput').addEventListener('change', function(e) {
      const files = e.target.files;
      if (files.length > 0) {
        const fileNames = Array.from(files).map(f => f.name).join(', ');
        document.getElementById('fileName').textContent = `Selected: ${fileNames}`;
      } else {
        document.getElementById('fileName').textContent = 'No files selected';
      }
    });

    function submitTask() {
      const fileInput = document.getElementById('fileInput');
      if (fileInput.files.length === 0) {
        alert('Please upload at least one file before submitting!');
        return;
      }

      let userProgress = JSON.parse(localStorage.getItem('userProgress')) || {};
      if (!userProgress[currentUser]) {
        userProgress[currentUser] = { completedDays: [] };
      }

      if (!userProgress[currentUser].completedDays.includes(Number(day))) {
        userProgress[currentUser].completedDays.push(Number(day));
      }

      localStorage.setItem('userProgress', JSON.stringify(userProgress));

      document.getElementById('successMessage').style.display = 'block';
      document.getElementById('submitBtn').disabled = true;

      setTimeout(() => {
        window.location.href = "dashboard.html";
      }, 2000);
    }

    function backToDashboard() {
      window.location.href = "dashboard.html";
    }

    function showInformBox() {
      document.getElementById('informBox').style.display = 'block';
    }
    function submitInform() {
      document.getElementById('informBox').style.display = 'none';
      document.getElementById('informSuccess').style.display = 'block';
    }
  </script>
</body>
</html>
